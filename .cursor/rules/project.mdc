---
alwaysApply: true
---
<project-guidelines>
=== foundation rules ===

## Code Quality and Testing Requirements

### Quality Checks (MUST run after each task)
- **Selective check scripts**: Use the appropriate check script based on the type of changes made:
  - **JavaScript/TypeScript/Vue changes only**: Run `npm run check:js` (or `tsx scripts/check-js.ts`)
    - Runs TypeScript type checking
    - Auto-fixes and checks JavaScript/TypeScript/Vue linting (ESLint with --fix)
  - **PHP changes only**: Run `npm run check:php` (or `tsx scripts/check-php.ts`)
    - Auto-fixes and checks PHP linting (Laravel Pint)
    - Runs PHP tests (Pest)
  - **Both JavaScript and PHP changes**: Run `npm run check` (or `tsx scripts/check.ts`)
    - Runs all checks: TypeScript type checking, JavaScript/TypeScript/Vue linting, PHP linting, JavaScript tests (Vitest), and PHP tests (Pest)
- **ALL failures must be addressed**, even if they are unrelated to the recent task. The check script must pass completely before considering a task complete.
- If any check fails, investigate and fix the issues before proceeding.

### UI/UX Design Guidelines (MUST follow)
- **Always refer to the UI/UX Guidelines**: When implementing any UI elements, components, or styling, refer to `/guidelines` route for the design system.
- The guidelines page (`resources/views/guidelines.blade.php`) defines:
  - Color palette (Smart Blue, Sapphire, Regal Navy, Prussian Blue, and neutral colors)
  - Typography styles and hierarchy
  - Button styles (Primary, Outline, Ghost) and sizes
  - Form input styling with dark theme
  - Table styling
  - Link styles
- **Dark Theme**: The application uses a dark theme by default:
  - Background: Prussian Blue (#001233)
  - Card backgrounds: Darker shade (#000e29)
  - Text: Light colors from the palette (900 shades for headings, 700-900 for body)
  - Borders: Twilight Indigo (#33415c)
- **Color Usage**:
  - Primary actions: Smart Blue (#0466c8)
  - Secondary actions: Sapphire (#0353a4)
  - Headings: Smart Blue 900 (#c3e0fe) or Regal Navy 900 (#b4d8fe)
  - Body text: Twilight Indigo 900 (#d0d7e5)
  - Borders/separators: Twilight Indigo (#33415c)
- Match the styling patterns, color usage, and component structure shown in the guidelines page.

### Testing Requirements (MUST create/update tests)
- **JavaScript/Vue Tests**: For any task that involves creating or modifying JavaScript or Vue code, you MUST create or update corresponding tests in the `resources/js` directory (using Vitest).
  - Test files should follow the naming pattern: `*.test.ts` or `*.test.js`
  - Tests should cover the functionality you've implemented or modified
  - Use Vitest's testing utilities and assertions

- **PHP Tests**: For any task that involves creating or modifying PHP code, you MUST create or update corresponding tests.
  - Use Pest for all PHP tests
  - **Unit Tests**: Use unit tests (`php artisan make:test --unit`) ONLY if the PHP code does NOT use Laravel features (facades, Eloquent, database, HTTP, etc.) or database operations
  - **Feature Tests**: Use feature tests (`php artisan make:test --pest`) for code that uses Laravel features, database operations, HTTP requests, or any framework functionality
  - Tests should cover the functionality you've implemented or modified
  - Follow existing test patterns and conventions in the `tests` directory

### Frontend Verification (MUST verify before completion)
- **Browser Testing**: For any task that involves frontend changes (UI components, styling, Vue components, CSS, etc.), you MUST use Playwright MCP (preferred) or browser MCP server to visually verify the changes before marking the task as complete.
- Navigate to the relevant pages, take screenshots, and verify that:
  - The changes render correctly
  - Styling matches the design guidelines (if applicable)
  - Interactive elements work as expected
  - The UI matches the intended design
- **Prefer Playwright MCP** over Cursor IDE Browser when both are available due to superior capabilities (resize, multiple contexts, better debugging, etc.)
- Do not mark frontend tasks as complete without visual verification in a real browser environment.

### Authentication and Testing
- **Demo Credentials**: When testing pages behind authentication or using browser tools to verify authenticated pages, use the demo credentials from the seeder.
- Check `database/seeders/DatabaseSeeder.php` for the current demo/test credentials. Use the credentials defined there for all authenticated testing scenarios.
- Do not hardcode credentials in rules or documentation - always reference the seeder file as the source of truth.

### Workflow Order
1. Make code changes
2. Create or update tests for the changes (JS/Vue tests for JS/Vue code, PHP tests for PHP code)
3. For frontend changes: Use Playwright MCP (preferred) or browser MCP server to visually verify the changes
4. Run the appropriate check script:
   - `npm run check:js` for JavaScript/TypeScript/Vue changes only
   - `npm run check:php` for PHP changes only
   - `npm run check` for both JavaScript and PHP changes
5. Fix any remaining errors (the script auto-fixes what it can)
6. Re-run the appropriate check script to verify everything passes
7. Only then consider the task complete

## MCP Servers Available

This project has access to several MCP (Model Context Protocol) servers that provide powerful tools. **Always use these servers proactively** rather than asking the user or working around them. Use the appropriate server based on the task:

### Laravel Boost (`laravel-boost`)
**When to use**: Laravel-specific operations, database queries, debugging, documentation search
- **Application info**: Get PHP/Laravel versions, installed packages, Eloquent models (`application-info`)
- **Database operations**: Query database schema, execute read-only SQL queries (`database-schema`, `database-query`)
- **Artisan commands**: List and understand available Artisan commands (`list-artisan-commands`)
- **Laravel docs search**: Search version-specific Laravel ecosystem documentation (`search-docs`) - **USE THIS FIRST** for Laravel/Inertia/Livewire/Filament/Tailwind/Pest docs
- **Tinker/Debugging**: Execute PHP code in Laravel context, check errors (`tinker`, `last-error`, `read-log-entries`)
- **Routes/Config**: List routes, get config values, check environment variables (`list-routes`, `get-config`, `list-available-env-vars`)
- **URLs**: Generate absolute URLs for routes/paths (`get-absolute-url`)
- **Browser logs**: Read frontend JavaScript errors and console logs (`browser-logs`)

### Laravel Herd (`herd`)
**When to use**: Managing local development environment, services, PHP versions
- **Site management**: Get site information, secure/unsecure sites, isolate PHP versions (`get-site-information`, `secure-or-unsecure-site`, `isolate-or-unisolate-site`)
- **Services**: Manage MySQL, Redis, PostgreSQL, etc. (`find-available-services`, `install-service`, `start-or-stop-service`)
- **PHP versions**: List and install PHP versions (`get-all-php-versions`, `install-php-version`)
- **Debug sessions**: Start/stop debug sessions to capture queries and logs (`start-debug-session`, `stop-debug-session`)

### Context7 (`context7`)
**When to use**: Looking up library/package documentation and code examples
- **Library docs**: Get up-to-date documentation for any library/package (`resolve-library-id`, `get-library-docs`)
- Use when you need documentation for npm packages, PHP packages, or any external library
- Supports both API references (code mode) and conceptual guides (info mode)

### Playwright (`playwright`)
**When to use**: Browser automation, visual verification, frontend testing (PREFERRED over Cursor IDE Browser)
- **Full browser automation**: More comprehensive than Cursor IDE Browser with better tooling
- **Navigation**: Navigate to URLs, go back, forward, reload pages
- **Browser management**: Resize browser windows, set viewport sizes, manage multiple contexts
- **Interaction**: Click, type, hover, select options, press keys, drag and drop
- **Verification**: Take screenshots, capture page snapshots, wait for elements, assertions
- **Advanced features**: Multiple browser contexts, network interception, file downloads, geolocation, permissions
- **Debugging**: Get console messages, network requests, performance metrics
- **MUST use** for frontend verification tasks (see Frontend Verification section)
- **Prefer this** over Cursor IDE Browser when both are available due to superior capabilities

### Cursor IDE Browser (`cursor-ide-browser`)
**When to use**: Browser automation fallback if Playwright MCP is not available
- **Navigation**: Navigate to URLs, go back, resize browser (`browser-navigate`, `browser-navigate-back`, `browser-resize`)
- **Interaction**: Click, type, hover, select options, press keys (`browser-click`, `browser-type`, `browser-hover`, `browser-select-option`, `browser-press-key`)
- **Verification**: Take screenshots, capture accessibility snapshots, wait for elements (`browser-take-screenshot`, `browser-snapshot`, `browser-wait-for`)
- **Debugging**: Get console messages and network requests (`browser-console-messages`, `browser-network-requests`)
- Use only if Playwright MCP is not available

### Serper Search (`serper-search`)
**When to use**: Web searches for current information, real-time data
- **Web search**: Perform Google searches with rich results (`google_search`)
- **Web scraping**: Scrape webpage content and metadata (`scrape`)
- Use when you need up-to-date information not in training data or documentation

### shadcn (`shadcn`)
**When to use**: Working with shadcn/ui components
- **Component info**: List all available components, get component details (`getComponents`, `getComponent`)
- Use when implementing or referencing shadcn/ui components

### Filesystem (`filesystem`)
**When to use**: File operations within allowed directories
- **File operations**: Read, write, edit, move files (`read-text-file`, `write-file`, `edit-file`, `move-file`)
- **Directory operations**: List directories, create directories, search files (`list-directory`, `create-directory`, `search-files`)
- **File info**: Get file metadata (`get-file-info`)
- Use for file operations when working within MCP-accessible directories


</project-guidelines>